import{c as E,o as v,g as i,i as p,b as u,t as m,x as C,F as d,e as b,f as y,E as D}from"./web.C-jhdCJy.js";const S="LastContributionFetchDate",_="GithubContributionsCount",x=c=>{const[a,l]=E(Array.from({length:364},(t,r)=>0)),h=async(t=1,r=150)=>fetch(`https://api.github.com/repos/${c.org}/${c.repo}/commits?sha=main&per_page=${r}&page=${t}`,{headers:new Headers({Accept:"application/vnd.github.v3+json"})}),e=t=>{localStorage.setItem(_,t.join(",")),localStorage.setItem(S,new Date().toISOString().split("T")[0]??""),l(t)},s=async()=>{const t=Array.from({length:364},(n,o)=>0);let r=1;for(;;){const n=await h(r).then(async o=>o.json()).catch(o=>{throw new Error(o)});if(n.length===0)return e(t);r++;for(const o of n){const g=new Date(o.commit.author.date),f=Math.floor((Date.now()-g.getTime())/(1e3*60*60*24));if(f<t.length)t[f]=(t[f]??0)+1;else return e(t)}}};return v(()=>{const t=localStorage.getItem(_);localStorage.getItem(S)===new Date().toISOString().split("T")[0]&&t?l(t.split(",").map(r=>Number(r))??a):(console.log("fetching"),s())}),a};var A=m('<div class="flex items-center justify-center gap-[5px]">'),w=m("<div>Something went wrong!"),F=m("<div>Loading..."),$=m("<div>");const I=c=>{const a=x(c),l=e=>e===0?"bg-[#E8EAEE]":e<2?"bg-[#93E7A2]":e<4?"bg-[#3EBE5E]":e<6?"bg-[#2F984A]":"bg-[#216435]",h=e=>e<12?"hidden xl:flex":e<21?"hidden lg:flex":e<40?"hidden sm:flex":"";return(()=>{var e=i(A);return p(e,u(D,{get fallback(){return i(w)},get children(){return u(C,{get fallback(){return i(F)},get children(){return u(d,{get each(){return Array.from({length:52},(s,t)=>t)},children:s=>(()=>{var t=i($);return p(t,u(d,{get each(){return Array.from({length:7},(r,n)=>n)},children:r=>{const n=(a()?.length??364)-(s*7+r),o=n>364/2?"lg:block hidden":"";return(()=>{var g=i($);return b(()=>y(g,`m-0.5 size-3 rounded-sm ${l(a()?.[n]??0)} ${o} `)),g})()}})),b(()=>y(t,`flex flex-col gap-1 ${h(s)}`)),t})()})}})}})),e})()};export{I as Contribution};
