import{c as h,o as p,g as K,i as c,t as E}from"./web.C-jhdCJy.js";const v="DiscordLastFetched",f="DiscordMemberCount",j=e=>{const[r,i]=h(Number(localStorage.getItem(f))??0),l=async()=>fetch(`https://discord.com/api/v9/invites/${e().inviteCode}?with_counts=true`,{headers:new Headers({Accept:"application/json"})}),n=async()=>{const t=await l();if(t.status!==304&&t.ok){const a=(await t.json()).approximate_member_count;localStorage.setItem(f,String(a)),localStorage.setItem(v,String(Date.now())),i(a)}};return p(()=>{const t=localStorage.getItem(f),o=Number(localStorage.getItem(v)),a=24*60*60*1e3;o+a<Date.now()&&t?i(Number(t)):n()}),r},$="GithubRepoStatsEtag",w="GithubForksCount",_="GithubStarsCount",z=e=>{const r=s=>Number(localStorage.getItem(s)??0),[i,l]=h(r(_)||0),[n,t]=h(r(w)||0),o=async(s="")=>fetch(`https://api.github.com/repos/${e.org}/${e.repo}`,{headers:new Headers({"If-None-Match":s})}),a=async()=>{const s=await o(localStorage.getItem($)??"");if(s.status!==304&&s.ok){const g=await s.json(),d=g.stargazers_count,u=g.forks_count;localStorage.setItem(_,String(d)),localStorage.setItem(w,String(u)),localStorage.setItem($,s.headers.get("Etag")??""),l(d),t(u)}};return p(()=>void a()),{starCount:i,forkCount:n}},y="GithubContributorsEtag",b="GithubContributorsCount",R=e=>{const[r,i]=h(Number(localStorage.getItem(b)??0)),l=async(t="")=>fetch(`https://api.github.com/repos/${e.org}/${e.repo}/contributors?anon=true&per_page=1`,{headers:new Headers({"If-None-Match":t,Accept:"application/vnd.github.v3+json"})}),n=async()=>{const t=await l(localStorage.getItem(y)??"");let o=Number(localStorage.getItem(b)??0);if(t.status!==304&&t.ok){const a=t.headers.get("Link")??"",s=/page=(\d+)>; rel="last"/.exec(a);s?o=parseInt(s[1],10):o=(await t.json()).length,localStorage.setItem(b,String(o)),localStorage.setItem(y,t.headers.get("Etag")??""),i(o)}};return p(()=>{n()}),{contributorCount:r}};var H=E('<div class="w-full rounded-lg border border-white p-3 sm:px-20 sm:py-8"><div class="grid w-full grid-cols-2 gap-6"><div class="flex flex-col gap-3 whitespace-nowrap sm:flex-row"><div class="size-5 shrink-0"></div><div class="flex gap-1"><span class="text-btn text-light"></span><span class="text-btn text-grey">Members</span></div></div><div class="flex flex-col gap-3 whitespace-nowrap sm:flex-row"><div class="size-5 shrink-0"></div><div class="flex gap-1"><span class="text-btn text-light"></span><span class="text-btn text-grey">Contributors</span></div></div><div class="flex flex-col gap-3 whitespace-nowrap sm:flex-row"><div class="size-5 shrink-0"></div><div class="flex gap-1"><span class="text-btn text-light"></span><span class="text-btn text-grey">Stars</span></div></div><div class="flex flex-col gap-3 whitespace-nowrap sm:flex-row"><div class="size-5 shrink-0"></div><div class="flex gap-1"><span class="text-btn text-light"></span><span class="text-btn text-grey">Forks');const A=e=>{const r=z(e),i=R(e),l=j(()=>({inviteCode:e.inviteCode})),n=t=>{if(t<1e3)return t.toString();if(t<1e4){const o=Math.floor(t/1e3),a=t%1e3;return`${o} ${a.toString().padStart(3,"0")}`}return`${(t/1e3).toFixed(1)} K`};return(()=>{var t=K(H),o=t.firstChild,a=o.firstChild,s=a.firstChild,g=s.nextSibling,d=g.firstChild,u=a.nextSibling,m=u.firstChild,I=m.nextSibling,k=I.firstChild,x=u.nextSibling,C=x.firstChild,D=C.nextSibling,F=D.firstChild,M=x.nextSibling,S=M.firstChild,N=S.nextSibling,G=N.firstChild;return c(s,()=>e.discord),c(d,()=>n(l())),c(m,()=>e.profileUp),c(k,()=>n(i.contributorCount())),c(C,()=>e.star),c(F,()=>n(r.starCount())),c(S,()=>e.fork),c(G,()=>n(r.forkCount())),t})()};export{A as GithubStats};
